<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Historia Clínica</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/css/historiaclinica.css">
</head>
<body>

<div class="form-container">

  <!-- PANEL IZQUIERDO -->
  <div class="left-panel">

    <h1>Historia Clínica</h1>
    <h2>Registro clínico inicial del paciente</h2>

    <form class="clinical-form">

      <!-- 1. MOTIVO DE CONSULTA -->
      <section class="form-section">
        <h3>1. Motivo de Consulta</h3>

        <div class="subsection">
          <h4>Dolor / Molestia</h4>

          <div class="form-grid">
            <div class="form-group">
              <label>Descripción del dolor</label>
              <input type="text" placeholder="Ej. Dolor lumbar">
            </div>

            
<div class="form-group full-width">
  <label>Zona principal</label>

  <div class="checkbox-group" id="zonaPrincipal">
    <label><input type="checkbox" value="Cervical"> Cervical</label>
    <label><input type="checkbox" value="Torácica"> Torácica</label>
    <label><input type="checkbox" value="Lumbar"> Lumbar</label>
    <label><input type="checkbox" value="Pélvica"> Pélvica</label>
    <label><input type="checkbox" value="Extremidad superior"> Extremidad superior</label>
    <label><input type="checkbox" value="Extremidad inferior"> Extremidad inferior</label>
    <label><input type="checkbox" value="Otros"> Otros</label>
  </div>
</div>
            <div class="form-group">
              <label>Otros (especificar)</label>
              <input type="text" placeholder="Ej. Costal, glúteo, abdominal">
            </div>

            <div class="form-group">
              <label>Irradiación</label>
              <input type="text" placeholder="Ej. Pierna derecha">
            </div>

            <div class="form-group">
              <label>Tiempo de evolución</label>
              <input type="text" placeholder="Ej. 3 semanas">
            </div>
          </div>
        </div>
      </section>

      <!-- 2. CARACTERÍSTICAS DEL DOLOR -->
      <section class="form-section">
        <h3>2. Características del Dolor</h3>

        <div class="form-group full-width">
          <label>Tipos de dolor</label>
          <div class="checkbox-group">
            <label><input type="checkbox"> Punzante</label>
            <label><input type="checkbox"> Urente</label>
            <label><input type="checkbox"> Opresivo</label>
            <label><input type="checkbox"> Tirante</label>
            <label><input type="checkbox"> Calambre</label>
          </div>
        </div>

        <div class="form-group full-width">
          <label>EVA por tipo de dolor</label>
          <div class="eva-grid">
            <div><label>Punzante</label><input type="number" min="0" max="10"></div>
            <div><label>Urente</label><input type="number" min="0" max="10"></div>
            <div><label>Opresivo</label><input type="number" min="0" max="10"></div>
            <div><label>Tirante</label><input type="number" min="0" max="10"></div>
            <div><label>Calambre</label><input type="number" min="0" max="10"></div>
          </div>
        </div>

        <div class="form-group full-width">
          <label>Síntomas asociados</label>
          <div class="checkbox-group">
            <label><input type="checkbox"> Rigidez</label>
            <label><input type="checkbox"> Hormigueo</label>
            <label><input type="checkbox"> Debilidad</label>
          </div>
        </div>

        <div class="form-group full-width">
          <label>Dificultad para</label>
          <div class="checkbox-group">
            <label><input type="checkbox"> Sentarse</label>
            <label><input type="checkbox"> Acostarse</label>
            <label><input type="checkbox"> Pararse</label>
            <label><input type="checkbox"> Caminar</label>
            <label><input type="checkbox"> Correr</label>
            <label><input type="checkbox"> Manejar</label>
          </div>
        </div>
        <!-- PATRÓN DEL DOLOR -->
<div class="form-group full-width">
  <label>Patrón del dolor</label>

  <div class="checkbox-group">
    <label><input type="checkbox"> Esporádico</label>
    <label><input type="checkbox"> Constante</label>
  </div>
</div>

<!-- MOMENTO DEL DOLOR -->
<div class="form-group full-width">
  <label>Momento del día en que predomina</label>

  <div class="checkbox-group">
    <label><input type="checkbox"> Mañana</label>
    <label><input type="checkbox"> Tarde</label>
    <label><input type="checkbox"> Noche</label>
  </div>
</div>
      </section>

      <!-- 3. ANÁLISIS POSTURAL -->
      <section class="form-section">
        <h3>3. Análisis Postural y Dinámico</h3>

        <div class="form-grid">
          <div class="form-group">
            <label>Plano frontal</label>
            <select>
              <option>Normal</option>
              <option>Desviación izquierda</option>
              <option>Desviación derecha</option>
            </select>
          </div>

          <div class="form-group">
            <label>Plano sagital</label>
            <select>
              <option>Normal</option>
              <option>Hiperlordosis</option>
              <option>Hipolordosis</option>
              <option>Anteriorización de cabeza</option>
            </select>
          </div>

          <div class="form-group">
            <label>Marcha</label>
            <select>
              <option>Normal</option>
              <option>Antálgica</option>
              <option>Claudicante</option>
            </select>
          </div>
        </div>
      </section>

      <!-- 4. HALLAZGOS -->
      <section class="form-section">
        <h3>4. Hallazgos Palpatorios y Segmentarios</h3>

        <div class="form-group full-width">
          <label>Regiones afectadas</label>
          <div class="checkbox-group">
            <label><input type="checkbox"> Cervical</label>
            <label><input type="checkbox"> Torácica</label>
            <label><input type="checkbox"> Lumbar</label>
            <label><input type="checkbox"> Pélvica</label>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label>Niveles vertebrales</label>
            <input type="text" placeholder="Ej. C2, T6-T7, L5">
          </div>

          <div class="form-group">
            <label>Restricción principal</label>
            <select>
              <option>Rotación</option>
              <option>Flexión</option>
              <option>Extensión</option>
              <option>Lateroflexión</option>
            </select>
          </div>
        </div>
      </section>

      <!-- 5. IMPRESIÓN CLÍNICA -->
      <section class="form-section">
        <h3>5. Impresión Clínica y Plan</h3>

        <div class="form-group full-width">
          <label>Diagnóstico Quiropráctico</label>
          <input type="text">
        </div>

        <div class="form-group full-width">
          <label>Técnicas aplicadas</label>
          <div class="checkbox-group">
            <label><input type="checkbox"> Diversified</label>
            <label><input type="checkbox"> Gonstead</label>
            <label><input type="checkbox"> Activator</label>
            <label><input type="checkbox"> Thompson</label>
            <label><input type="checkbox"> SOT</label>
          </div>
        </div>

        <div class="form-group">
          <label>Frecuencia</label>
          <input type="text">
        </div>
      </section>

      <button class="btn-primary">Guardar Historia Clínica</button>

    </form>
  </div>
<section class="form-section">
  <h3>Historia Clínica Generada</h3>
  <textarea id="generatedText" rows="20" readonly style="width:100%; padding:12px; border-radius:10px; border:1px solid #ccc;"></textarea>
</section>
  
  <!-- PANEL DERECHO -->
  <div class="right-panel">
    <div class="body-map-container">
      <h3>Selector Corporal</h3>

      <div class="body-map-header">
  <h3>Selector Corporal</h3>

  <select id="selectionMode">
    <option value="principal">Dolor principal</option>
    <option value="irradiacion">Irradiación</option>
  </select>
</div>
      <div class="body-map human">

  <!-- CABEZA / CUELLO -->
  <div class="body-zone head" data-zone="Cervical">Cervical</div>

  <!-- HOMBROS -->
  <div class="body-row">
    <div class="body-zone shoulder left" data-zone="Hombro Izquierdo">Hombro Izq.</div>
    <div class="body-zone shoulder right" data-zone="Hombro Derecho">Hombro Der.</div>
  </div>

  <!-- EXTREMIDADES SUPERIORES -->
  <div class="body-row">
    <div class="body-zone arm left" data-zone="Brazo Izquierdo">Brazo Izq.</div>
    <div class="body-zone arm right" data-zone="Brazo Derecho">Brazo Der.</div>
  </div>

  <div class="body-row">
    <div class="body-zone elbow left" data-zone="Codo Izquierdo">Codo Izq.</div>
    <div class="body-zone elbow right" data-zone="Codo Derecho">Codo Der.</div>
  </div>

  <!-- TRONCO -->
  <div class="body-zone thoracic" data-zone="Torácica">Torácica</div>
  <div class="body-zone lumbar" data-zone="Lumbar">Lumbar</div>
  <div class="body-zone pelvic" data-zone="Pélvica">Pélvica</div>

  <!-- EXTREMIDADES INFERIORES -->
  <div class="body-row">
    <div class="body-zone leg left" data-zone="Muslo Izquierdo">Muslo Izq.</div>
    <div class="body-zone leg right" data-zone="Muslo Derecho">Muslo Der.</div>
  </div>

  <div class="body-row">
    <div class="body-zone knee left" data-zone="Rodilla Izquierda">Rodilla Izq.</div>
    <div class="body-zone knee right" data-zone="Rodilla Derecha">Rodilla Der.</div>
  </div>

  <div class="body-row">
    <div class="body-zone leg left" data-zone="Pierna Izquierda">Pierna Izq.</div>
    <div class="body-zone leg right" data-zone="Pierna Derecha">Pierna Der.</div>
  </div>

</div>
<div class="body-map-footer">
  <button class="view-btn active" data-view="anterior">Vista anterior</button>
  <button class="view-btn" data-view="posterior">Vista posterior</button>
</div>
      <div class="selected-zones">
        <strong>Zonas seleccionadas:</strong>
        <span id="selectedZones">Ninguna</span>
      </div>
    </div>
  </div>

</div>

<script>
const zones = document.querySelectorAll(".body-zone");
const output = document.getElementById("selectedZones");
const modeSelect = document.getElementById("selectionMode");

// Checkboxes de Zona Principal
const zonaCheckboxes = document.querySelectorAll("#zonaPrincipal input[type='checkbox']");

// Input de irradiación
const irradiacionInput = document.querySelector(
  'input[placeholder="Ej. Pierna derecha"]'
);

// Arrays para almacenar seleccionados
let principal = [];
let irradiacion = [];

zones.forEach(zone => {
  zone.addEventListener("click", () => {
    const region = zone.dataset.zone;
    const side = zone.dataset.side ? ` ${zone.dataset.side}` : ""; // <- corrección
    const label = `${region}${side}`;
    const mode = modeSelect.value;

    if (mode === "principal") {
      zone.classList.toggle("principal");

      // Actualiza array de principal
      if (principal.includes(label)) {
        principal = principal.filter(z => z !== label);
      } else {
        principal.push(label);
      }

      // Sincroniza con checkboxes
      zonaCheckboxes.forEach(cb => {
        // Coincide con la zona completa o solo la región base
        if (cb.value === label || cb.value === region) {
          cb.checked = principal.includes(label);
        }
      });

    } else if (mode === "irradiacion") {
      zone.classList.toggle("irradiacion");

      // Actualiza array de irradiación
      if (irradiacion.includes(label)) {
        irradiacion = irradiacion.filter(z => z !== label);
      } else {
        irradiacion.push(label);
      }

      // Llena input de irradiación
      irradiacionInput.value = irradiacion.join(", ");
    }

    // Actualiza el texto visual de zonas seleccionadas
    const allSelected = [...principal, ...irradiacion];
    output.textContent = allSelected.length ? allSelected.join(", ") : "Ninguna";
  });
});
</script>

<script>
document.querySelector(".btn-primary").addEventListener("click", function(e) {
  e.preventDefault(); // evita que se recargue la página

  // 1. Paciente y fecha
  const paciente = document.querySelector('input[placeholder="Ej. Nombre del paciente"]').value || "________________";
  const fecha = new Date().toLocaleDateString("es-MX", { day: "2-digit", month: "long", year: "numeric" });

  // 2. Motivo de consulta
  const dolorDesc = document.querySelector('input[placeholder="Ej. Dolor lumbar"]').value || "________________";
  const irradiacion = document.querySelector('input[placeholder="Ej. Pierna derecha"]').value || "________________";
  const evolucion = document.querySelector('input[placeholder="Ej. 3 semanas"]').value || "________________";

  // Síntomas asociados
  const sintomas = Array.from(document.querySelectorAll('section:nth-of-type(2) .checkbox-group input:checked'))
                      .map(cb => cb.parentElement.textContent.trim())
                      .join(", ") || "________________";

  // Dificultades
  const dificultades = Array.from(document.querySelectorAll('section:nth-of-type(2) .form-group:nth-of-type(4) input:checked'))
                      .map(cb => cb.parentElement.textContent.trim())
                      .join(", ") || "________________";

  // Tipos de dolor y EVA
  const tiposDolor = Array.from(document.querySelectorAll('.eva-grid div input'))
                    .map(input => {
                      const label = input.previousElementSibling.textContent.trim();
                      const valor = input.value || "0";
                      return `${label} ${valor}/10`;
                    })
                    .join(", ");

  // 3. Análisis postural
  const planoFrontal = document.querySelector('select:nth-of-type(1)').value || "________________";
  const planoSagital = document.querySelector('select:nth-of-type(2)').value || "________________";
  const marcha = document.querySelector('select:nth-of-type(3)').value || "________________";

  // 4. Hallazgos
  const cervical = document.querySelector('input[placeholder="Ej. C2, T6-T7, L5"]').value || "________________";
  const restriccion = document.querySelector('select:nth-of-type(4)').value || "________________";

  // 5. Impresión clínica y plan
  const diagnostico = document.querySelector('section:nth-of-type(5) input[type="text"]').value || "________________";

  // Generar texto
  const historia = `
Historia Clínica
Paciente: "${paciente}"
Fecha: ${fecha}

1. Motivo de Consulta: "${dolorDesc}"
El paciente presenta "${dolorDesc}" con irradiación hacia "${irradiacion}", con una evolución de "${evolucion}". Reporta "${sintomas}" y "${dificultades}". El dolor se describe como "${tiposDolor}".

2. Análisis Postural y Dinámico
Plano Frontal: "${planoFrontal}"
Plano Sagital: "${planoSagital}"
Marcha: "${marcha}"

3. Hallazgos Palpatorios y Segmentarios
Cervical: "${cervical}" con restricción en "${restriccion}"

4. Impresión Clínica y Plan de Acción
Diagnóstico Quiropráctico: "${diagnostico}"
`;

  document.getElementById("generatedText").value = historia;

});
</script>

  
</body>
</html>
